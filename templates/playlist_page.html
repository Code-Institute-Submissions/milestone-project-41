{% extends "base.html" %} {% block content %}
<div class="row">
	<div class="col s12">
		<h2>Playlist</h2>
	</div>
</div>

<div class="row">
	<div class="col s12">
		<!-- <div id="player"></div> -->
		<iframe id="existing-iframe-example" width="640" height="360" src="https://www.youtube.com/embed/3jWRrafhO7M"
			frameborder="0" style="border: solid 4px #37474F"></iframe>
	</div>
</div>

<div class="row">
	<div class="col s12 m8">
		<div class="video-container">
			<iframe src="https://www.youtube.com/embed/3jWRrafhO7M" frameborder="0" allow="autoplay"
				allowfullscreen></iframe>
		</div>
	</div>
	<div class="col s12 m4">
		<ul class="collection with-header">
			<li class="collection-header">
				<h5>Upcoming songs</h5>
			</li>
			<br>
            {% for song in users.playlist %}
                {% if song !=users.playlist[0] %}
                    <li class="collection-item">{{song}}</li>
                {% endif %}
			{% endfor %}
		</ul>
	</div>
</div>


<!--Youtube API Script-->
<script src="https://www.youtube.com/iframe_api"></script>
<!--My JavaScript Script-->
<!-- <script type="text/javascript" src="assets/js/youtube-player-api.js"></script> -->
<script type="text/javascript">
	var tag = document.createElement('script');
  tag.id = 'iframe-demo';
  tag.src = 'https://www.youtube.com/iframe_api';
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('existing-iframe-example', {
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
    });
  }
  function onPlayerReady(event) {
    document.getElementById('existing-iframe-example').style.borderColor = '#FF6D00';
  }

    // when video ends
    function onPlayerStateChange(event) {        
        if(event.data == 0) {            
            player.loadVideoById ('{{users.playlist[1]}}');
        }
    }
</script>


{% endblock %}